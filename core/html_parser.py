from bs4 import BeautifulSoup
from cloudbluepentest.utils.logger import module_logger, log

parser_log = module_logger(__name__)
parser = 'lxml'


def parsedHtml(request):
    try:
        html = BeautifulSoup(request.content, parser)
        log.info('Parsing HTML: %s', request.url)
        # parser_log.debug(parser + 'parsed HTML: %s', html)
        # forms = html.find_all('form')
        # for form in forms:
        #     parser_log.debug(form)
        return html
    except Exception as e:
        log.critical(
            parser + 'Unable to parse request content: %s', request.content)
        parser_log.critical(e)


def parsedHtml5(request):
    try:
        html = BeautifulSoup(request.content, 'html5')
        log.info('Parsing HTML: %s', request.url)
        # parser_log.debug(parser + 'parsed HTML: %s', html)
        # forms = html.find_all('form')
        # for form in forms:
        #     parser_log.debug(form)
        return html
    except Exception as e:
        log.critical(
            parser + 'Unable to parse request content: %s', request.content)
        parser_log.critical(e)
